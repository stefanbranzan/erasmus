if(!customElements.get("pickup-availability")){class PickupAvailability extends HTMLElement{constructor(){super(),this.hasAttribute("available")&&(this.refreshHandler=this.handleRefreshBtnClick.bind(this),this.unavailableHtml=this.querySelector("template").content.firstElementChild.cloneNode(!0),this.getAvailability(this.dataset.variantId))}handleRefreshBtnClick(){this.getAvailability(this.dataset.variantId)}async getAvailability(variantId){let{rootUrl}=this.dataset;rootUrl.endsWith("/")||(rootUrl=`${rootUrl}/`);try{const response=await fetch(`${rootUrl}variants/${variantId}/?section_id=pickup-availability`);if(!response.ok)throw new Error(response.status);const tmpl=document.createElement("template");tmpl.innerHTML=await response.text(),this.renderPickupInfo(tmpl.content.querySelector(".shopify-section"))}catch{const refreshBtn=this.querySelector(".js-refresh");refreshBtn&&refreshBtn.removeEventListener("click",this.refreshHandler),this.renderUnavailableMsg()}}renderPickupInfo(sectionHtml){const drawer=document.querySelector(".js-pickup-drawer");if(drawer&&drawer.remove(),!sectionHtml.querySelector(".pickup-status")){this.innerHTML="",this.removeAttribute("available");return}this.setAttribute("available",""),this.innerHTML=sectionHtml.querySelector(".pickup-status").outerHTML,document.body.appendChild(sectionHtml.querySelector(".js-pickup-drawer"));const showDetailsBtn=this.querySelector(".js-show-pickup-info");showDetailsBtn&&showDetailsBtn.addEventListener("click",()=>{document.querySelector(".js-pickup-drawer").open(showDetailsBtn)})}renderUnavailableMsg(){this.innerHTML="",this.appendChild(this.unavailableHtml),this.querySelector(".js-refresh").addEventListener("click",this.refreshHandler)}}customElements.define("pickup-availability",PickupAvailability)}
//# sourceMappingURL=/cdn/shop/t/4/assets/pickup-availability.js.map?v=110729656532710618711693734875
