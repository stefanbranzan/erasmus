if(!customElements.get("announcement-bar")){class AnnouncementBar extends HTMLElement{constructor(){super(),this.slider=this.querySelector(".announcement__slider"),this.localization=this.querySelector(".announcement__localization"),this.links=this.querySelectorAll(".js-announcement-link"),this.menu=document.querySelector(".main-menu__content"),this.isPaused=!1,this.bindEvents(),this.init()}disconnectedCallback(){this.moveLinksHandler&&window.removeEventListener("on:breakpoint-change",this.moveLinksHandler),this.moveLocalizationHandler&&window.removeEventListener("on:breakpoint-change",this.moveLocalizationHandler)}bindEvents(){this.links&&(this.moveLinksHandler=this.moveLinksHandler||this.moveLinks.bind(this),window.addEventListener("on:breakpoint-change",this.moveLinksHandler)),this.localization&&(this.moveLocalizationHandler=this.moveLocalizationHandler||this.moveLocalization.bind(this),window.addEventListener("on:breakpoint-change",this.moveLocalizationHandler)),this.slider&&(this.slider.addEventListener("mouseenter",this.pauseSlider.bind(this)),this.slider.addEventListener("mouseleave",this.resumeSlider.bind(this)))}init(){if(this.slider){const slides=this.slider.querySelectorAll(".announcement__text");slides[0].classList.add("is-visible");const nextSlide=()=>{if(!this.isPaused&&theme.elementUtil.isInViewport(this)){const currSlide=this.slider.querySelector(".announcement__text.is-visible"),currSlideIndex=Array.from(currSlide.parentNode.children).indexOf(currSlide),nextSlideIndex=currSlideIndex+1<slides.length?currSlideIndex+1:0;document.dir==="rtl"?this.slider.scrollTo(-Math.abs(nextSlideIndex*slides[nextSlideIndex].clientWidth),0):this.slider.scrollTo(slides[nextSlideIndex].offsetLeft-32,0),slides[nextSlideIndex].classList.add("is-visible"),slides[currSlideIndex].classList.remove("is-visible")}setTimeout(nextSlide,this.dataset.slideDelay)};setTimeout(nextSlide,this.dataset.slideDelay)}this.links&&this.moveLinks(),this.localization&&this.moveLocalization()}moveLinks(){const menuAnnouncementLinks=document.querySelector(".mob__announcement-links");if(!theme.mediaMatches.md&&!menuAnnouncementLinks){const mobNav=document.createElement("nav");mobNav.classList.add("mob__announcement-links");const mobNavUl=document.createElement("ul");mobNav.classList.add("secondary-nav"),this.links.forEach(link=>{mobNav.innerHTML+=`<li><a class="secondary-nav__item" href="${link.href}">${link.innerText}</a>`}),mobNav.appendChild(mobNavUl),this.menu.appendChild(mobNav)}else theme.mediaMatches.md&&menuAnnouncementLinks&&menuAnnouncementLinks.remove()}moveLocalization(){const menuLocalization=document.querySelector(".mob__localization");if(!theme.mediaMatches.md&&!menuLocalization){const mobLocalizationElem=document.createElement("div");mobLocalizationElem.classList.add("mob__localization"),mobLocalizationElem.appendChild(this.localization.firstElementChild),this.menu.appendChild(mobLocalizationElem)}else theme.mediaMatches.md&&menuLocalization&&(this.localization.appendChild(menuLocalization.firstElementChild),menuLocalization.remove())}pauseSlider(){this.isPaused=!0}resumeSlider(){this.isPaused=!1}}customElements.define("announcement-bar",AnnouncementBar)}
//# sourceMappingURL=/cdn/shop/t/4/assets/announcement.js.map?v=104149175048479582391693734873
